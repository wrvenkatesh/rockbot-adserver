{{define "content"}}
<h2>Campaigns</h2>

{{if .Campaign}}
<h3>Edit Campaign</h3>
<form method="POST" action="/campaigns/{{.Campaign.ID}}/update">
    <label>Campaign Name:</label>
    <input type="text" name="name" value="{{.Campaign.Name}}" required>

    <label>Start Time:</label>
    <input type="datetime-local" name="start_time" value="{{.Campaign.StartTime.Format "2006-01-02T15:04"}}" required>

    <label>End Time:</label>
    <input type="datetime-local" name="end_time" value="{{.Campaign.EndTime.Format "2006-01-02T15:04"}}" required>

    <label>Target DMA (* for all):</label>
    <input type="text" name="target_dma" value="{{.Campaign.TargetDMA}}" required>

    <label>Ad Media URL:</label>
    <select name="media_url" required>
        {{range .AvailableAds}}
        <option value="{{.MediaURL}}" {{if eq .MediaURL $.CurrentMediaURL}}selected{{end}}>{{.MediaURL}}</option>
        {{end}}
    </select>

    <div style="margin-top: 20px;">
        <button type="submit">Update Campaign</button>
        <a href="/campaigns" style="margin-left: 10px; padding: 10px 20px; background: #6c757d; color: white; text-decoration: none; border-radius: 3px; display: inline-block;">Cancel</a>
    </div>
</form>
{{else}}
<h3>Create New Campaign</h3>
<form method="POST" action="/campaigns/create">
    <label>Campaign Name:</label>
    <input type="text" name="name" required>

    <label>Start Time:</label>
    <input type="datetime-local" name="start_time" required>

    <label>End Time:</label>
    <input type="datetime-local" name="end_time" required>

    <label>Target DMA (* for all):</label>
    <input type="text" name="target_dma" value="*" required>

    <label>Ad Media URL:</label>
    <select name="media_url" required>
        {{range .AvailableAds}}
        <option value="{{.MediaURL}}">{{.MediaURL}}</option>
        {{end}}
    </select>

    <button type="submit">Create Campaign</button>
</form>
{{end}}

<h3>Active Campaigns</h3>
<table>
    <tr>
        <th>Name</th>
        <th>Start</th>
        <th>End</th>
        <th>DMA</th>
        <th>Actions</th>
    </tr>
    {{range .Campaigns}}
    <tr>
        <td>{{.Name}}</td>
        <td>{{.StartTime.Format "2006-01-02 15:04"}}</td>
        <td>{{.EndTime.Format "2006-01-02 15:04"}}</td>
        <td>{{.TargetDMA}}</td>
        <td>
            <a href="/campaigns/{{.ID}}/edit" style="padding: 4px 8px; background: #007bff; color: white; text-decoration: none; border-radius: 3px; font-size: 0.9em;">Edit</a>
        </td>
    </tr>
    {{end}}
</table>
{{end}}